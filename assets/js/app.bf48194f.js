(function(t){function e(e){for(var a,i,c=e[0],s=e[1],l=e[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},r=[];function i(t){return c.p+"assets/js/"+({about:"about"}[t]||t)+"."+{about:"f026c3cc"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=o[t]=[e,a]}));e.push(n[2]=a);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=i(t);var l=new Error;r=function(e){s.onerror=s.onload=null,clearTimeout(d);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[t]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/vueScanAgent/",c.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"12c2":function(t,e,n){t.exports=n.p+"assets/media/beep.b76b0645.mp3"},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("v-app-bar",{attrs:{app:""}},[n("v-btn",{attrs:{text:""},on:{click:function(e){return t.$router.push({name:"Home"})}}},[t._v("Scan")]),n("v-btn",{attrs:{text:""},on:{click:function(e){return t.$router.push({name:"History"})}}},[t._v("History")]),n("v-btn",{attrs:{text:""},on:{click:function(e){return t.$router.push({name:"Settings"})}}},[t._v("Settings")])],1),n("v-content",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)},r=[],i={name:"App",components:{},data:()=>({})},c=i,s=n("2877"),l=n("6544"),d=n.n(l),u=n("7496"),m=n("40dc"),p=n("8336"),v=n("a523"),f=n("a75b"),h=Object(s["a"])(c,o,r,!1,null,null,null),b=h.exports;d()(h,{VApp:u["a"],VAppBar:m["a"],VBtn:p["a"],VContainer:v["a"],VContent:f["a"]});var g=n("8c4f"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-col",[n("v-row",{attrs:{align:"baseline",justify:"center","no-gutters":""}},t._l(t.allScanActions,(function(e){return n("v-card",{key:e.code,staticClass:"ma-3 pa-6",staticStyle:{"min-height":"150px",width:"300px"},attrs:{raised:"",outlined:"",tile:"",height:"200",ripple:{class:"green--text"},to:{name:"Scan",params:{actionCode:e.code}},justify:"space-around"}},[n("v-card-title",[t._v(t._s(e.label))]),n("v-spacer"),n("v-card-actions",{attrs:{align:"right","align-self":t.align}},[n("v-btn",{attrs:{text:"",outlined:""}},[n("v-icon",[t._v("mdi-qrcode")]),t._v("\n                        SCAN\n                    ")],1),n("v-spacer")],1)],1)})),1),n("v-card-text",{staticStyle:{height:"100px",position:"relative"}},[n("v-btn",{attrs:{fab:"",absolute:"",bottom:"",right:"",dark:"",color:"pink"},on:{click:function(e){return t.$router.push({name:"SettingItem",params:{code:"new"}})}}},[n("v-icon",[t._v("mdi-plus")])],1)],1)],1)],1)},S=[],y=n("2f62"),w={name:"Dashboard",computed:{...Object(y["b"])(["allScanActions"])}},_=w,k=n("b0af"),x=n("99d9"),A=n("62ad"),V=n("132d"),j=n("0fd9"),$=n("2fa4"),O=Object(s["a"])(_,C,S,!1,null,"5652dc60",null),T=O.exports;d()(O,{VBtn:p["a"],VCard:k["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:A["a"],VContainer:v["a"],VIcon:V["a"],VRow:j["a"],VSpacer:$["a"]});var I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",{directives:[{name:"show",rawName:"v-show",value:t.isShowCamera,expression:"isShowCamera"}],attrs:{id:"preview-container",justify:"center",dense:"","no-gutters":""}},[n("v-responsive",{attrs:{"aspect-ratio":16/9,align:"center"}},[n("video",{attrs:{id:"preview"}})]),n("v-bottom-navigation",{attrs:{fixed:""}},[0===t.cameras.length?n("v-btn",{attrs:{text:""}},[t._v("No cameras found")]):t._e(),t.cameras.length?n("v-btn",{attrs:{text:""}},t._l(t.cameras,(function(e){return n("li",[e.id==t.activeCameraId?n("span",{staticClass:"active",attrs:{title:t.formatName(e.name)}},[t._v("\n                            "+t._s(t.formatName(e.name))+"\n                        ")]):t._e(),e.id!=t.activeCameraId?n("span",{attrs:{title:t.formatName(e.name)}},[n("a",{on:{click:function(n){return n.stopPropagation(),t.activeCamera(e)}}},[t._v(t._s(t.formatName(e.name)))])]):t._e()])})),0):t._e(),n("div",{staticClass:"flex-grow-1"}),n("v-btn",{attrs:{text:""}},[n("router-link",{attrs:{to:{name:"Home"}}},[n("span",[t._v("Home")]),n("v-icon",[t._v("mdi-home")])],1)],1)],1)],1),t.isShowContent?n("v-row",{attrs:{justify:"center",dense:"","no-gutters":""}},[n("v-responsive",{attrs:{"aspect-ratio":9/16,"max-width":"500px"}},[n("iframe",{staticStyle:{overflow:"hidden"},attrs:{src:t.scanUrl,width:"100%",height:"100%",scrolling:"no"}})]),n("v-bottom-navigation",{attrs:{fixed:""}},[n("v-btn",{attrs:{text:"",color:"green"}},[t._v("\n                "+t._s(t.lastContent)+"\n            ")]),n("v-btn",{attrs:{text:""},on:{click:function(e){return t.startScan()}}},[n("v-icon",[t._v("mdi-qrcode")]),n("span",[t._v("Continue")])],1)],1)],1):t._e()],1)},R=[],E=n("427d"),H=n.n(E),N={name:"ScanScreen",data:()=>({cameras:[],activeCameraId:null,scans:[],settings:"https://192.168.68.171:8443/admin/qr-check/abc?key=%qrdata%&activityName=checkin&key1=val1&key2=val2",isShowCamera:!0,isShowContent:!1,lastContent:"",modalContent:"",scanUrl:"",scanner:null}),beforeRouteLeave(t,e,n){this.scanner.stop(),n()},beforeMount(){void 0===this.scanAction&&(this.$toasted.error("Could not find Action"),this.$router.back())},mounted(){let t=this;t.audio=new Audio(n("12c2")),t.audio.load(),t.scanner=new H.a.Scanner({video:document.getElementById("preview"),scanPeriod:2}),t.scanner.addListener("scan",(function(e,n){t.audio.play(),t.showContent(e)})),H.a.Camera.getCameras().then((function(e){e.length>0?(t.cameras=e,t.autoSelectCamera(e)):console.error("No cameras found.")})).catch((function(t){console.error(t)}))},methods:{formatName:function(t){return t||"(unknown)"},autoSelectCamera:function(t){t.length>1?(t.forEach(t=>{t.name.toLowerCase().indexOf("back")>-1&&this.activeCamera(t)}),this.activeCamera(t[0])):this.activeCamera(t[0])},activeCamera:function(t){this.activeCameraId=t.id,this.scanner.start(t)},startScan:function(){this.isShowContent=!1,this.isShowCamera=!0,this.scanner.start(this.cameras[this.activeCameraId])},showContent:function(t){this.scanner.stop(),this.$store.commit("addHistory",{scanAction:this.scanAction.code,content:t,created:new Date}),this.lastContent=t,this.isShowContent=!0,this.isShowCamera=!1,this.scanUrl=this.scanAction.link.replace(/%scanValue%/,encodeURIComponent(t)),!0===this.scanAction.autoRescan&&setTimeout(this.startScan,5e3)}},computed:{scanAction(){return this.$store.getters.getScanActionByCode(this.$route.params.actionCode)}}},B=N,D=n("b81c"),P=n("6b53"),q=Object(s["a"])(B,I,R,!1,null,null,null),L=q.exports;d()(q,{VBottomNavigation:D["a"],VBtn:p["a"],VContainer:v["a"],VIcon:V["a"],VResponsive:P["a"],VRow:j["a"]});var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-col",[n("v-row",{attrs:{align:"baseline",justify:"center",dense:"","no-gutters":""}},t._l(t.allScanActions,(function(e){return n("v-card",{key:e.code,staticClass:"ma-2 pa-0",staticStyle:{"min-height":"150px",width:"300px"},attrs:{raised:"",outlined:"",tile:""}},[n("v-card-title",[t._v(t._s(e.label))]),n("v-card-text",[n("strong",[t._v("["+t._s(e.code)+"]")]),t._v(" :: "+t._s(e.link))]),n("v-card-actions",[n("v-btn",{staticClass:"ma-1",attrs:{color:"blue",dark:"",to:{name:"SettingItem",params:{code:e.code,actionType:"edit"}}}},[n("v-icon",{attrs:{dark:"",left:""}},[t._v("mdi-pencil")]),t._v("\n                        Edit\n                    ")],1),n("v-btn",{staticClass:"ma-1",attrs:{color:"green",dark:"",to:{name:"SettingItem",params:{code:e.code,actionType:"copy"}}}},[n("v-icon",{attrs:{dark:"",left:""}},[t._v("mdi-checkbox-marked-circle")]),t._v("\n                        Copy\n                    ")],1),n("v-spacer"),n("v-btn",{staticClass:"ma-1",attrs:{color:"red",dark:"",to:{name:"SettingItem",params:{code:e.code,actionType:"delete"}}}},[n("v-icon",[t._v("mdi-cancel")])],1)],1)],1)})),1),n("v-btn",{attrs:{absolute:"",bottom:"",right:"",fab:"",dark:"",color:"pink",to:{name:"SettingItem",params:{code:"???",actionType:"new"}}}},[n("v-icon",[t._v("mdi-plus")])],1)],1)],1)},U=[],F={name:"Settings",computed:{...Object(y["b"])(["allScanActions"])}},J=F,z=Object(s["a"])(J,M,U,!1,null,"745c2d77",null),G=z.exports;d()(z,{VBtn:p["a"],VCard:k["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:A["a"],VContainer:v["a"],VIcon:V["a"],VRow:j["a"],VSpacer:$["a"]});var K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form"},[n("v-text-field",{attrs:{label:"Activity Code",required:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),n("v-text-field",{attrs:{label:"Label",required:""},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}}),n("v-text-field",{attrs:{label:"Link",required:""},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}}),n("v-switch",{attrs:{label:"Auto Rescan: "+t.form.autoRescan},model:{value:t.form.autoRescan,callback:function(e){t.$set(t.form,"autoRescan",e)},expression:"form.autoRescan"}}),n("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.performUpdate}},[t._v("\n        Save\n    ")]),n("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.performDelete}},[t._v("\n        Delete\n    ")])],1)},Q=[];class W{constructor(t){this.originalData=t;for(let e in t)this[e]=t[e]}data(){let t={};for(let e in this.originalData)t[e]=this[e];return t}reset(){for(let t in this.originalData)this[t]=""}}var X={name:"SettingItem",data:()=>({form:null,actionCode:"",actionType:""}),beforeRouteUpdate(t,e,n){this.actionCode=t.params.code,this.actionType=t.params.actionType,this.fetchData(),n()},beforeMount(){switch(this.actionCode=this.$route.params.code,this.actionType=this.$route.params.actionType,this.actionType){case"delete":return void this.performDelete();case"copy":return void this.performCopy()}},mounted(){this.form=new W(this.currentSetting)},methods:{fetchData(){this.form=new W(this.currentSetting)},performDelete(){this.$store.commit("removeScanAction",{code:this.actionCode}),this.$router.push("/settings")},performCopy(){let t="Copy_"+this.actionCode+"_"+Math.random();this.$store.commit("copyScanAction",{code:this.actionCode,newCode:t}),this.$router.push({name:"SettingItem",params:{code:t,actionType:"edit"}})},performUpdate(){this.$store.commit("updateScanAction",this.form),this.$router.push("/settings")}},computed:{currentSetting(){let t=this.$store.getters.getScanActionByCode(this.actionCode);return void 0===t&&(t={code:this.actionCode,label:"",link:"http://"}),t},...Object(y["b"])(["allScanActions"])}},Y=X,Z=n("4bd4"),tt=n("b73d"),et=n("8654"),nt=Object(s["a"])(Y,K,Q,!1,null,"0c27f251",null),at=nt.exports;d()(nt,{VBtn:p["a"],VForm:Z["a"],VSwitch:tt["a"],VTextField:et["a"]});var ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{align:"start",justify:"center"}},t._l(t.allScanHistories,(function(e,a){return n("v-card",{key:a,staticClass:"ma-3 pa-6",staticStyle:{"min-height":"150px",width:"300px"},attrs:{raised:"",outlined:"",tile:""}},[n("v-card-title",[t._v(t._s(e.content))]),n("v-card-text",[t._v(t._s(e.created))]),n("v-card-text",[n("strong",[t._v(t._s(e.scanAction))])])],1)})),1)},rt=[],it={name:"ScanHistory",computed:{...Object(y["b"])(["allScanHistories"])}},ct=it,st=Object(s["a"])(ct,ot,rt,!1,null,"0c64c961",null),lt=st.exports;d()(st,{VCard:k["a"],VCardText:x["b"],VCardTitle:x["c"],VRow:j["a"]});var dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"setting-content"}},[t._v("\n"+t._s(t.jsonSettings)+"\n")])},ut=[],mt={name:"SettingExport",computed:{jsonSettings(){return JSON.stringify(this.allScanActions)},...Object(y["b"])(["allScanActions"])}},pt=mt,vt=Object(s["a"])(pt,dt,ut,!1,null,null,null),ft=vt.exports;a["a"].use(g["a"]);var ht=new g["a"]({mode:"history",base:"/vueScanAgent/",routes:[{path:"",component:T},{path:"/",name:"Home",component:T},{path:"/scan/:actionCode",name:"Scan",component:L},{path:"/history",name:"History",component:lt},{path:"/settings",name:"Settings",component:G},{path:"/setting/:code/:actionType",name:"SettingItem",component:at},{path:"/settings/export",name:"SettingExport",component:ft},{path:"/about",name:"about",component:()=>n.e("about").then(n.bind(null,"f820"))}]}),bt=n("0e44");a["a"].use(y["a"]);var gt=new y["a"].Store({state:{scanActions:[{code:"checkin",label:"Checkin",link:"https://127.0.0.1:8443/admin/qr-check/nestle?key=%scanValue%&activityName=CheckIn",autoRescan:!0}],scanHistories:[{scanAction:"code",content:"Search",created:""}]},getters:{allScanHistories:t=>{return t.scanHistories},allScanActions:t=>{return t.scanActions},getScanActionByCode:t=>e=>{return t.scanActions.find(t=>t.code===e)}},mutations:{removeScanAction(t,e){t.scanActions=t.scanActions.filter(t=>t.code!==e.code)},copyScanAction(t,e){let n=t.scanActions.findIndex(t=>t.code===e.code);if(n>-1){let a={...t.scanActions[n],code:e.newCode};t.scanActions.push(a)}},updateScanAction(t,e){let n=t.scanActions.findIndex(t=>t.code===e.originalData.code),a={code:e.code,label:e.label,link:e.link,autoRescan:e.autoRescan};-1!==n?t.scanActions[n]=a:t.scanActions.push(a)},addHistory(t,e){t.scanHistories.unshift(e)}},actions:{},plugins:[Object(bt["a"])({key:"scanAgent"})]}),Ct=n("9483");Object(Ct["a"])("/vueScanAgent/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});n("d1e7"),n("15f5");var St=n("f309");a["a"].use(St["a"]);var yt=new St["a"]({icons:{iconfont:"mdiSvg || md || fa || mdi"}}),wt=n("a65d"),_t=n.n(wt);a["a"].use(_t.a,{position:"top-center"}),a["a"].config.productionTip=!1,new a["a"]({router:ht,store:gt,vuetify:yt,render:t=>t(b)}).$mount("#app")}});
//# sourceMappingURL=app.bf48194f.js.map